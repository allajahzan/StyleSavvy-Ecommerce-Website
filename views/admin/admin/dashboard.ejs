<!doctype html>
<html class="no-js " lang="en">


<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
<meta name="description" content="Responsive Bootstrap 4 and web Application ui kit.">

<title>StyleSavvy-Admin</title>
<!-- Favicon-->

<link rel="stylesheet" href="/assets1/plugins/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="/assets1/plugins/jvectormap/jquery-jvectormap-2.0.3.css"/>
<link rel="stylesheet" href="/assets1/plugins/morrisjs/morris.css" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

 <!-- google icons -->
 <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />


<!-- Custom Css -->
<link rel="stylesheet" href="/assets1/css/style.min.css">
<link rel="stylesheet" href="/assets1/css/myStyle.css">
</head>


<body class="theme-blush" onload="loadDashboard()">

<!-- page loading -->
<section id="loading">
    <div class="loader"></div>
    <p>Loading</p>
</section>

<section id="dashboard">
    <aside id="leftsidebar" class="sidebar">
        <div class="navbar-brand">
            <button class="btn-menu ls-toggle-btn" type="button"><i class="zmdi zmdi-menu"></i></button>
            <a href="/admin/dashboard"><span class="m-l-10">StyleSavvy</span></a>
        </div>
        <div class="menu">
            <ul class="list">
                <li>
                    <div class="user-info">
                        <a class="image" href="/admin/dashboard"><img src="/assets1/images/admin.jpeg" alt="User"></a>
                        <div class="detail">
                            <h4><%= locals.admin%></h4>
                            <p>Admin</p>                     
                        </div>
                    </div>
                </li>
                <li class="active"><a href="dashboard" class="dashboard"><i class="zmdi zmdi-home"></i><span>Dashboard</span></a></li>
                <li> <a href="javascript:void(0);" class="menu-toggle" ><i class="zmdi zmdi-account"></i><span>Users</span></a>
                    <ul class="ml-menu">
                        <li><a href="activeUsers">Active Users</a></li>
                        <li><a href="blockedUsers">Blocked Users</a></li>
                    </ul>
                </li>
                <li> <a href="orders" ><i class="zmdi zmdi-shopping-basket"></i><span>Orders</span></a></li>
                <!-- <li> <a href="javascript:void(0);"><i class="zmdi zmdi-refresh"></i><span>returns</span></a></li> -->
                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-shopping-cart"></i><span class="product">Products</span></a>
                    <ul class="ml-menu">                    
                        <li><a href="addProducts">Products Add</a></li>
                        <li><a class="listed_products" href="listedProducts">Products Listed</a></li>
                        <li><a href="unlistedProducts">Products Unlisted</a></li>
                    </ul>
                </li>
                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-card-giftcard"></i><span>Coupons</span></a>
                    <ul class="ml-menu">
                        <li><a  href="addCoupons">Coupons Add</a></li>
                        <li><a  href="listsCoupons">Coupons Lists</a></li>                          
                    </ul>
                </li>
                <!-- <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-image-o"></i><span>Banners</span></a>
                    <ul class="ml-menu">
                        <li><a href="ui_kit.html">Banners Lists</a></li>                    
                        <li><a href="alerts.html">Banners Add</a></li>  
                        <li><a href="alerts.html">Banners Unlisted</a></li> 
                    </ul>
                </li> -->
                <li><a href="javascript:void(0);" class="menu-toggle"><i class="fas fa-percentage"></i><span>Offers</span></a>
                    <ul class="ml-menu">
                        <li><a href="addOffers" >Offers Add</a></li>
                        <li><a href="listsOffers" >Offers Lists</a></li>
                    </ul>
                </li>
                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-male-female"></i>
                    <span>Types</span></a>
                    <ul class="ml-menu">
                        <li><a href="listedTypes">Types Listed</a></li>
                        <li><a href="unlistedTypes">Types Unlisted</a></li>
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-folder"></i>
                    <span>Categories</span></a>
                    <ul class="ml-menu">
                        <li><a href="listedCategories">Categories Listed</a></li>
                        <li><a href="unlistedCategories">Categories Unlisted</a></li>
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-crop"></i>
                    <span>Size</span></a>
                    <ul class="ml-menu">
                        <li><a href="listedSizes">Size Listed</a></li>
                        <li><a href="unlistedSizes">Size Unlisted</a></li>
                    </ul>
                </li>

                <li><a href="javascript:void(0);" class="menu-toggle"><i class="zmdi zmdi-palette"></i>
                    <span>Colors</span></a>
                    <ul class="ml-menu">
                        <li><a href="listedColors">Colors Listed</a></li>
                        <li><a href="UnlistedColors">Colors Unlisted</a></li>
                    </ul>
                </li>

                <li><a href="/admin/salesReports"><i class="zmdi zmdi-trending-up"></i><span>Sales Report</span></a></li>            
                <li><a href="/admin/logout" ><i class="zmdi zmdi-power"></i><span>Sign-Out</span></a></li>            
                
               
            </ul>
        </div>
    </aside>
    
    
    <!-- Main Content -->
    <section class="content">
        <div class="body_scroll">
            <div class="block-header">
                <div class="row">
                    <div class="col-lg-7 col-md-6 col-sm-12">
                        <h2>Dashboard</h2>
                        <ul class="breadcrumb">
                            <li class="breadcrumb-item"></li>
                            <li class="breadcrumb-item active">Dashboard</li>
                        </ul>
                        <button class="btn btn-primary btn-icon mobile_menu" type="button"><i class="zmdi zmdi-sort-amount-desc"></i></button>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row clearfix">
                    <!-- <div class="col-lg-3 col-md-6 col-sm-6 col-6 text-center">
                        <div class="card">
                            <div class="body">                            
                                <input type="text" class="knob" value="<%= locals.usersNo %>" data-linecap="round" data-width="100" data-height="100" data-thickness="0.08" data-fgColor="#00adef" readonly>
                                <p>Users</p>
                              
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6 col-6 text-center">
                        <div class="card">
                            <div class="body">                            
                                <input type="text" class="knob" value="201" data-linecap="round" data-width="100" data-height="100" data-thickness="0.08" data-fgColor="#ee2558" readonly>
                                <p>Total Orders</p>      
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6 col-6 text-center">
                        <div class="card">
                            <div class="body">                            
                                <input type="text" class="knob" value="62" data-linecap="round" data-width="100" data-height="100" data-thickness="0.08" data-fgColor="#8f78db" readonly>
                                <p>Ṭotal Returns</p>     
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 col-sm-6 col-6 text-center">
                        <div class="card">
                            <div class="body">                            
                                <input type="text" class="knob" value="38" data-linecap="round" data-width="100" data-height="100" data-thickness="0.08" data-fgColor="#f67a82" readonly>
                                <p>Revenue</p>
                            </div>
                        </div>
                    </div> -->
                </div>
                <div>
                  
                 
                </div>

                <div style="color: #444;  padding: 0px 0 20px; position: relative;  box-shadow: none;"  class="header">
                    <h2 style="font-size: 15px; color: #777; text-transform: uppercase;margin-bottom: 10px;position: relative;"><strong style="color: #e47297;">Sales</strong> Report</h2>
                </div>

                <div  style="position: relative; top: -2px; padding-left: 0px; margin-bottom: 10px;" class="dropdown col-4">
                    <button style="border-radius: 5px; display: flex; border-color: lightgray; border-style: none; background-color: white; padding-bottom: 5px; padding-top: 8px" class="dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                     
                        <% if(locals.type === 'Weekly'){ %>
                            <p style="margin: 0px; font-size: 15px;">Weekly reports</p>
                        <% }else if(locals.type === 'Yearly') {%>
                            <p style="margin: 0px; font-size: 15px;">Yearly reports</p>
                        <% }else{ %>
                            <p style="margin: 0px; font-size: 15px;">Weekly reports</p>
                        <% } %>           

                        
                     <span style="position: relative; top: 2px;" class="material-symbols-outlined">
                        expand_more
                        </span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                      <li><a style="color: black;" class="dropdown-item" href='/admin/dashboard?report=Weekly'>Weekly reports</a></li>
                      <li><a style="color: black;" class="dropdown-item" href='/admin/dashboard?report=Yearly'>Yearly reports</a></li>
                    </ul>
                  </div>
                <div class="row clearfix">
                    
                   
                    <div class="col-lg-6 col-md-12">
                        <div class="card product-report">
                            
                            <div class="body">
                                <!-- <div class="row clearfix">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <div class="icon xl-amber m-b-15"><i class="zmdi zmdi-chart-donut"></i></div>
                                        <div class="col-in">
                                            <small class="text-muted mt-0">Sales Report</small>
                                            <h4 class="mt-0">$1,516</h4>                                        
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <div class="icon xl-blue m-b-15"><i class="zmdi zmdi-chart"></i></div>
                                        <div class="col-in">
                                            <small class="text-muted mt-0">Annual Revenue</small>
                                            <h4 class="mt-0">$6,481</h4>                                        
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <div class="icon xl-purple m-b-15"><i class="zmdi zmdi-card"></i></div>
                                        <div class="col-in">
                                            <small class="text-muted mt-0">Total Profit</small>
                                            <h4 class="mt-0">$3,915</h4>                                        
                                        </div>
                                    </div>
                                </div> -->
                               <% if(locals.type === 'Weekly'){ %>

                                <table style="display: none;">
                                    <tbody>
                                        <tr class="tr1">
                                            <% locals.orders.forEach(item => { %>
                                                
                                                <th><%= getDayOfWeek(item._id) %></td>

                                            <% });  %>
                                        </tr>
                                        <tr class="tr2">
                                            <% locals.orders.forEach(item => { %>
                                                
                                                <td><%= item.deliveredItemCount %></td>

                                            <% });  %>
                                        </tr>
                                    </tbody>
                                </table>

                               <% } else if(locals.type === 'Yearly') {%>

                                <table style="display: none;">
                                    <tbody>
                                        <tr class="tr1">
                                            <% locals.orders.forEach((item, index) => { %>
                                                
                                                <% if(index !==0){ %>
                                                <th><%= item._id %></td>
                                                <% } %>

                                            <% });  %>
                                        </tr>
                                        <tr class="tr2">
                                            <% locals.orders.forEach((item, index)  => { %>
                                                
                                                <% if(index !==0){ %>
                                                    <td><%= item.deliveredItemCount %></td>
                                                <% } %>    

                                            <% });  %>
                                        </tr>
                                    </tbody>
                                </table>

                                
                               <% } else{ %>

                                
                                <table style="display: none;">
                                    <tbody>
                                        <tr class="tr1">
                                            <% locals.orders.forEach(item => { %>
                                                
                                                <th><%= getDayOfWeek(item._id) %></td>

                                            <% });  %>
                                        </tr>
                                        <tr class="tr2">
                                            <% locals.orders.forEach(item => { %>
                                                
                                                <td><%= item.deliveredItemCount %></td>

                                            <% });  %>
                                        </tr>
                                    </tbody>
                                </table>

                              
                                
                               <% } %> 

                               <% function getDayOfWeek(dateString) {
                                const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                                const date = new Date(dateString);                 
                                const dayOfWeek = date.getDay();                                
                                return daysOfWeek[dayOfWeek];
                            } %>
                               
                                <!-- <div id="area_chart"></div> -->

                                <h5>Bar Charts</h5>

                                <canvas id="myChart" style="width:100%;max-width:800px"></canvas>

                                <script>
                                    // const xValues = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                       
                                    const barColors = ["#e47297", "#e47297", "#e47297", "#e47297", "#e47297", "#e47297", "#e47297"];

                                    const tableRows = document.querySelectorAll('table tbody tr');
                                    let yValues = [];
                                    let xValues = [];

                                    tableRows[0].querySelectorAll('th').forEach(th => {
                                        xValues.push(th.textContent.trim());
                                    });

                                    tableRows[1].querySelectorAll('td').forEach(td => {
                                        yValues.push(parseInt(td.textContent.trim()));
                                    });
                            
                                    new Chart("myChart", {
                                        type: "bar",
                                        data: {
                                            labels: xValues,
                                            datasets: [{
                                                backgroundColor: barColors,
                                                data: yValues
                                            }]
                                        },
                                        options: {
                                            legend: { display: false },
                                            // title: {
                                            //     display: true,
                                            //     text: "Total Sales Report"
                                            // }
                                        }
                                    });
                                    
                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12">
                     <div class="card" >
                            <!-- <div class="header">
                                <h2><strong>Sales</strong> Report</h2>
                            </div> -->
                            <div style="padding-top: 25px;padding-bottom: 15px;" class="body">
                           <!--     <div class="table-responsive">
                                <table class="table table-hover theme-color c_table">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th></th>
                                            <th>Views</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="w70"><img class="w50" src="/assets1/images/ecommerce/1.png" alt=""></td>
                                            <td><a href="javascript:void(0)" class="text-muted">PlayStation 4 1TB (Jet Black)</a></td>
                                            <td>3,432</td>
                                        </tr>
                                        <tr>
                                            <td><img class="w50" src="/assets1/images/ecommerce/2.png" alt=""></td>
                                            <td><a href="javascript:void(0)" class="text-muted">Printed color block T-shirt</a></td>
                                            <td>852</td>
                                        </tr>
                                        <tr>
                                            <td><img class="w50" src="/assets1/images/ecommerce/3.png" alt=""></td>
                                            <td><a href="javascript:void(0)" class="text-muted">Wireless headphones</a></td>
                                            <td>1,321</td>
                                        </tr>
                                        <tr>
                                            <td><img class="w50" src="/assets1/images/ecommerce/4.png" alt=""></td>
                                            <td><a href="javascript:void(0)" class="text-muted">PlayStation 4 1TB (Jet Black)</a></td>
                                            <td>980</td>
                                        </tr>
                                        <tr>
                                            <td><img class="w50" src="/assets1/images/ecommerce/5.png" alt=""></td>
                                            <td><a href="javascript:void(0)" class="text-muted">Knit beanie with patch</a></td>
                                            <td>2,518</td>
                                        </tr>
                                    </tbody>
                                </table>-->

                                <h5>Pie Charts</h5>
                                <!-- <div style="background-color: white; border-radius: 5px; padding-top: 30px;padding-bottom: 30px;"> -->
                                    <canvas id="myChart1" style="width:100%;max-width:600px;"></canvas>
                                <!-- </div> -->

                                <script>

                                // const tableRows1 = document.querySelectorAll('table tbody tr');

                                let xValues1 = []
                                let yValues1 = []
                                tableRows[0].querySelectorAll('th').forEach(th => {
                                        xValues1.push(th.textContent.trim());
                                    });

                                    tableRows[1].querySelectorAll('td').forEach(td => {
                                        yValues1.push(parseInt(td.textContent.trim()));
                                    });

                             
                                    const barColors1 = ["black", "grey", "orange", "yellow", "red", "blue", "green"];

                                 
                                new Chart("myChart1", {
                                  type: "doughnut",
                                  data: {
                                    labels: xValues1,
                                    datasets: [{
                                      backgroundColor: barColors1,
                                      data: yValues1
                                    }]
                                  },
                                  options: {
                                    // title: {
                                    //   display: true,
                                    //   text: "World Wide Wine Production 2018"
                                    // }
                                  }
                                });
                                </script>

                            </div>   
                        </div>           
                        </div> 

                        <!-- top 10 products -->
                        <div class="col-lg-6 col-md-12">
                            <div style="color: #444;  padding: 10px 0 0px 0; position: relative;  box-shadow: none;"  class="header">
                                <h2 style="font-size: 15px; color: #777; text-transform: uppercase;margin-bottom: 10px;position: relative;"><strong style="color: #e47297;">Top <%= locals.products.length %></strong> Products</h2>
                            </div>
                            <div class="card" >
                                   <!-- <div class="header">
                                       <h2><strong>Sales</strong> Report</h2>
                                   </div> -->
                                   <div style="padding-top: 25px;padding-bottom: 15px;" class="body">
                                      <div class="table-responsive">
                                       <table class="table table-hover theme-color c_table">
                                           <thead>
                                               <tr>
                                                   <th>Item</th>
                                                   <th></th>
                                                   <th>Orders</th>
                                               </tr>
                                           </thead>
                                           <tbody>
                                            <% locals.products.forEach((item)=>{ %>
                                               <tr>
                                                    <td class="w70"><img class="w50" src="/products/uploads/<%= item.image %>" alt=""></td>
                                                    <td><a href="javascript:void(0)" class="text-muted"><%= item._id %></a></td>
                                                    <td><%= item.count %></td>
                                               </tr>
                                               <% }) %>
                                           </tbody>
                                       </table>
                                    </div>
                                </div>       
                            </div>
                        </div>


                        <!-- top 10 category -->

                        <div class="col-lg-6 col-md-12">
                            <div style="color: #444;  padding: 10px 0 0px 0; position: relative;  box-shadow: none;"  class="header">
                                <h2 style="font-size: 15px; color: #777; text-transform: uppercase;margin-bottom: 10px;position: relative;"><strong style="color: #e47297;">Top <%= locals.categories.length %></strong> Categories</h2>
                            </div>
                            <div class="card" >
                                   <!-- <div class="header">
                                       <h2><strong>Sales</strong> Report</h2>
                                   </div> -->
                                   <div style="padding-top: 25px;padding-bottom: 15px;" class="body">
                                      <div class="table-responsive">
                                       <table class="table table-hover theme-color c_table">
                                           <thead>
                                               <tr>
                                                   <th>Item</th>
                                                   <th></th>
                                                   <th>Orders</th>
                                               </tr>
                                           </thead>
                                           <tbody>
                                            <% locals.categories.forEach((item)=>{ %>
                                               <tr>
                                                    <td class="w70"><img class="w50" src="/products/uploads/<%= item.image %>" alt=""></td>
                                                    <td><a href="javascript:void(0)" class="text-muted"><%= item._id %></a></td>
                                                    <td><%= item.count %></td>
                                               </tr>
                                               <% }) %>
                                           </tbody>
                                       </table>
                                    </div>
                                </div>       
                            </div>
                         </div>
        </div>
    </section>
</section>
<script src="/assets1/js/pages/api/dashboard.js"></script>
<!-- Jquery Core Js --> 
<script src="/assets1/bundles/libscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js --> 
<script src="/assets1/bundles/vendorscripts.bundle.js"></script> <!-- Lib Scripts Plugin Js --> 


<script src="/assets1/bundles/jvectormap.bundle.js"></script> <!-- JVectorMap Plugin Js -->
<script src="/assets1/bundles/sparkline.bundle.js"></script> <!-- Sparkline Plugin Js -->
<script src="/assets1/bundles/knob.bundle.js"></script> <!-- Jquery Knob Plugin Js -->

<script src="/assets1/bundles/mainscripts.bundle.js"></script>

<script src="/assets1/js/pages/charts/jquery-knob.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
crossorigin="anonymous"></script>

</body>


</html>